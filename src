@Echo Off
Title File Randomizer - v1.4


::####  CONFIG SECTION  ####

::CAN MANUALLY SET DIRECTORY HERE- Comment the other and vice versa
::Set directory="C:\Users\echox\OneDrive\Pictures\All_Wallpapers"
mkdir "%~dp0"

::KEY BINDS - Edit these lists to your liking

set bind_delete=d del delete
set bind_review=v review
set bind_reload=r reload
set bind_randomizer=

::SET YOUR PREFERRED COLOR - List is on the documentation file on home page.
set color_code= 3
::####  END OF CONFIG  ####



::Titles
Echo.
Echo RandomFilePicker - v1.4
Echo.
Echo -github/bandito52
Echo.
Goto Start

::Step 1
:Start
Color %color_code%
Echo.
Echo (Step 1/4) - Directory set.
Set count=0
Echo.

::Step 2
Echo (Step 2/4) - Checking Directory... Please wait a moment.
For /f %%f in ('dir "%directory%" /b /s') do set /a count+=1

::Step 3
:Randomizer
Color %color_code%
CLS
Echo.
Echo (Step 3/4) - Randomizer choosing... Please wait a moment.
Set /a randN=%random% %% %count% +1
Set listN=0
For /f "tokens=1* delims=:" %%I in ('dir "%directory%" /b /s^| findstr /n /r . ^| findstr /b "%randN%"') do set filename=%%J
Goto Review

::Step 4
:Review
For /f %%A in ("%filename%") do set filesize=%%~zA
CLS
Start "" "%filename%"
Echo (Step 4/4) - File selected and presented.

::Info Pane
Echo.
Echo Location: %filename%
Echo.

::Choices
Echo How do you want to continue? Deletion is FINAL and PERMANENT.
Echo.
Echo OPTIONS:
Echo.
Echo ENTER %bind_randomizer% = Reroll for new file.
Echo %bind_delete% = Permanently delete.
Echo %bind_review% = Open file again.
Echo %bind_reload% = Update directory if you added new files.
Echo.
Set choice=
Set /p choice= Choice:
echo %bind_randomizer% | find /i "%choice%" >nul && goto Randomizer
echo %bind_delete% | find /i "%choice%" >nul && goto Deletion
echo %bind_review% | find /i "%choice%" >nul && goto Review
echo %bind_reload% | find /i "%choice%" >nul && goto Start
goto Randomizer

:Deletion
del %filename% | CLS
Color c
Echo.
Echo File permanently deleted.
Echo.
Pause
Goto Randomizer
